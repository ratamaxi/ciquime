<div class="estado-chips">
  <button class="chip" [class.active]="activeFilter === 'APROBADO'"
    (click)="setFilter(activeFilter === 'APROBADO' ? 'todos' : 'APROBADO')" aria-label="Filtrar por aceptado">
    <span class="icon ok" aria-hidden="true">
      <!-- check-circle -->
      <svg viewBox="0 0 24 24">
        <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm-1 14-4-4 1.4-1.4L11 12.2l4.6-4.6L17 9l-6 7Z" />
      </svg>
    </span>
    Aceptado
    <span class="count" *ngIf="counts.APROBADO">{{ counts.APROBADO }}</span>
  </button>

  <button class="chip" [class.active]="activeFilter === 'RECHAZADO'"
    (click)="setFilter(activeFilter === 'RECHAZADO' ? 'todos' : 'RECHAZADO')" aria-label="Filtrar por rechazado">
    <span class="icon error" aria-hidden="true">
      <!-- close-circle -->
      <svg viewBox="0 0 24 24">
        <path
          d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm3.5 13.1-1.4 1.4L12 13.4l-2.1 2.1-1.4-1.4L10.6 12 8.5 9.9l1.4-1.4L12 10.6l2.1-2.1 1.4 1.4L13.4 12l2.1 2.1Z" />
      </svg>
    </span>
    Rechazado
    <span class="count" *ngIf="counts.RECHAZADO">{{ counts.RECHAZADO }}</span>
  </button>

  <button class="chip" [class.active]="activeFilter === 'PENDIENTE'"
    (click)="setFilter(activeFilter === 'PENDIENTE' ? 'todos' : 'PENDIENTE')" aria-label="Filtrar por pendientes">
    <span class="icon warn" aria-hidden="true">
      <!-- warning-triangle -->
      <svg viewBox="0 0 24 24">
        <path
          d="M12.9 2.5a1.5 1.5 0 0 0-2.6 0L1.5 18.1A1.5 1.5 0 0 0 2.8 20h18.4a1.5 1.5 0 0 0 1.3-1.9L12.9 2.5ZM12 8c.55 0 1 .45 1 1v5a1 1 0 1 1-2 0V9c0-.55.45-1 1-1Zm0 9a1.25 1.25 0 1 1 0-2.5A1.25 1.25 0 0 1 12 17Z" />
      </svg>
    </span>
    Pendientes
    <span class="count" *ngIf="counts.PENDIENTE">{{ counts.PENDIENTE }}</span>
  </button>

    <button class="chip" [class.active]="activeFilter === 'ELIMINADO'"
    (click)="setFilter(activeFilter === 'ELIMINADO' ? 'todos' : 'ELIMINADO')" aria-label="Filtrar por pendientes">
    <span class="icon error" aria-hidden="true">
      <!-- warning-triangle -->
      <svg viewBox="0 0 16 16">
  <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"/>
      </svg>
    </span>
    Eliminados
    <span class="count" *ngIf="counts.ELIMINADO">{{ counts.ELIMINADO }}</span>
  </button>
</div>

<div class="card">
  <div class="card__header">
    <h2 class="card__title">{{ titulo }}</h2>
  </div>

  <div class="table-wrap">
    <table class="tabla">
      <thead>
        <tr>
          <th>Código de Aprobación</th>
          <th>Nombre Interno</th>
          <th>Producto</th>
          <th>Fabricante</th>
          <th class="col-estado">Estados</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let r of filtered | slice:0:MAX_TO_SHOW; trackBy: trackByRow">
          <td>{{ r.codigo || '' }}</td>
          <td>{{ r.nombreInterno || '' }}</td>
          <td class="col-producto" [title]="r.nombre_producto">{{ r.nombre_producto }}</td>
          <td class="col-fabricante" [title]="r.nomb_empresa">{{ r.nomb_empresa }}</td>
          <td class="col-estado">
            <span class="estado-pill" [class.ok]="r.estado === 'APROBADO'" [class.error]="r.estado === 'RECHAZADO'"
              [class.warn]="r.estado === 'PENDIENTE'" [attr.aria-label]="r.estado">
              <svg viewBox="0 0 24 24" *ngIf="r.estado === 'APROBADO'">
                <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm-1 14-4-4 1.4-1.4L11 12.2l4.6-4.6L17 9l-6 7Z" />
              </svg>
              <svg viewBox="0 0 24 24" *ngIf="r.estado === 'RECHAZADO'">
                <path
                  d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm3.5 13.1-1.4 1.4L12 13.4l-2.1 2.1-1.4-1.4L10.6 12 8.5 9.9l1.4-1.4L12 10.6l2.1-2.1 1.4 1.4L13.4 12l2.1 2.1Z" />
              </svg>
              <svg viewBox="0 0 24 24" *ngIf="r.estado === 'PENDIENTE'">
                <path
                  d="M12.9 2.5a1.5 1.5 0 0 0-2.6 0L1.5 18.1A1.5 1.5 0 0 0 2.8 20h18.4a1.5 1.5 0 0 0 1.3-1.9L12.9 2.5ZM12 8c.55 0 1 .45 1 1v5a1 1 0 1 1-2 0V9c0-.55.45-1 1-1Zm0 9a1.25 1.25 0 1 1 0-2.5A1.25 1.25 0 0 1 12 17Z" />
              </svg>
              <svg viewBox="0 0 16 16" *ngIf="r.estado === 'ELIMINADO'">
                <path
                  d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0" />
              </svg>
            </span>
          </td>
        </tr>

        <tr *ngIf="filtered.length === 0">
          <td colspan="5" class="empty">No hay registros para este filtro.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="card__footer">
    <button class="btn-primary" type="button" routerLink="/panel/ver-insumo" >Ver Más...</button>
  </div>
</div>
