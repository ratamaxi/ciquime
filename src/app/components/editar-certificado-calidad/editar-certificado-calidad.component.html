<section class="page" *ngIf="ready">
  <div class="page__watermark" aria-hidden="true"></div>

  <div class="page__container">
    <header class="page__header">
      <div>
        <h1>Editar Registro</h1>
      </div>
      <!-- Badge: ahora muestra el PRODUCTO -->
      <div class="page__badge" [title]="badgeText">{{ badgeText || '—' }}</div>
    </header>

    <form class="card form" [formGroup]="form" (ngSubmit)="guardar()">
      <!-- Solo lectura -->
      <div class="grid grid--two">
        <div class="field">
          <label>Número Original</label>
          <div class="control readonly">{{ numeroOriginal }}</div>
        </div>

        <div class="field">
          <label>Fabricante</label>
          <div class="control readonly">{{ fabricante }}</div>
        </div>
      </div>

      <!-- Radios + Aviso en (30/60/90) -->
      <div class="grid grid--two grid--align-end">
        <div class="field">
          <span class="label">Certificado por Documento de Calidad</span>
          <div class="radio-line" role="radiogroup" aria-label="¿Cuenta con documento de calidad?">
            <label>
              <input type="radio" formControlName="certificadoPorDocumento" [value]="true" />
              Sí
            </label>
            <label>
              <input type="radio" formControlName="certificadoPorDocumento" [value]="false" />
              No
            </label>
          </div>
        </div>

        <div class="field">
          <label for="avisoEn">Aviso en</label>
          <select id="avisoEn" class="control" formControlName="avisoEn">
            <option [value]="30">30 Días</option>
            <option [value]="60">60 Días</option>
            <option [value]="90">90 Días</option>
          </select>
        </div>
      </div>

      <div class="divider" aria-hidden="true"></div>

      <!-- Documento #1 + su vencimiento -->
      <div class="grid grid--two">
        <div class="field">
          <label for="doc1">Documento de calidad #1</label>
          <div class="file-control">
            <input id="doc1" type="file" (change)="onFileSelected(0, $event)" />
            <label class="file-control__button" for="doc1">Seleccionar archivo</label>
            <span class="file-control__name">
              {{ documentos[0].nombre || 'Ningún archivo seleccionado' }}
            </span>
          </div>
        </div>

        <div class="field">
          <label for="doc1-vencimiento">Vencimiento</label>
          <input id="doc1-vencimiento" type="date" class="control" formControlName="doc1Vencimiento"
            placeholder="dd/mm/aaaa" />
        </div>
      </div>

      <!-- Documento #2 + su vencimiento -->
      <div class="grid grid--two">
        <div class="field">
          <label for="doc2">Documento de calidad #2</label>
          <div class="file-control">
            <input id="doc2" type="file" (change)="onFileSelected(1, $event)" />
            <label class="file-control__button" for="doc2">Seleccionar archivo</label>
            <span class="file-control__name">
              {{ documentos[1].nombre || 'Ningún archivo seleccionado' }}
            </span>
          </div>
        </div>

        <div class="field">
          <label for="doc2-vencimiento">Vencimiento</label>
          <input id="doc2-vencimiento" type="date" class="control" formControlName="doc2Vencimiento"
            placeholder="dd/mm/aaaa" />
        </div>
      </div>

      <div class="actions">
        <button type="button" class="btn btn--ghost" (click)="cancelar()">Cancelar</button>
        <button type="submit" class="btn btn--primary">Grabar y guardar</button>
      </div>
    </form>
  </div>
</section>
