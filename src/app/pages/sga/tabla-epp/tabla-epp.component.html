<div class="ficha-card">
  <div class="ficha-table">
    <!-- Nombre del producto / Proveedor -->
    <div class="row">
      <div class="cell label">Nombre del producto:</div>
      <div class="cell value">
        <div class="split">
          <div class="left"><b>{{ ficha.productName }}</b></div>
          <div class="right muted"><b>Proveedor:</b> {{ ficha.supplier }}</div>
        </div>
      </div>
    </div>

    <!-- RNPQ -->
    <div class="row alt">
      <div class="cell label">RNPQ:</div>
      <div class="cell value">{{ ficha.rnpq || '' }}</div>
    </div>

    <!-- EPP (imagen desde assets/iconos/<LETRA>.png) -->
    <div class="row">
      <div class="cell label">Elementos de Protección Personal (EPP):</div>
      <div class="cell value">
        <ng-container *ngIf="ficha?.eppImg; else sinEpp">
          <img
            [src]="ficha.eppImg!"
            [alt]="'Pictograma ' + (ficha.eppCode ?? '')"
            class="epp-photo"
            loading="lazy"
            style="height: 80px; object-fit: contain;"
          />
        </ng-container>
        <ng-template #sinEpp>
          <span class="muted">Sin EPP definido.</span>
        </ng-template>
      </div>
    </div>

    <!-- Sección "Componentes Químicos" -->
    <div class="row section">
      <div class="cell section-header">Componentes Químicos</div>
    </div>

    <!-- Subtabla -->
    <div class="row">
      <div class="cell label sublabel">Componente</div>
      <div class="cell value">
        <table class="subtable">
          <thead>
            <tr>
              <th>Componente</th>
              <th>Cas</th>
              <th>Porcentaje</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let c of ficha.componentes; let idx = index" [class.alt]="idx % 2 === 1">
              <td>{{ c.nombre }}</td>
              <td>{{ c.cas }}</td>
              <td>{{ c.porcentaje }}</td>
            </tr>
            <tr *ngIf="!ficha.componentes?.length">
              <td colspan="3" class="empty">Sin componentes informados.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</div>
