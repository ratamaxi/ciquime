<!-- tabla-peligro.component.html (o el componente donde est치 la ficha) -->

<div class="ficha-card" #printSection>
    <div class="ficha-meta" *ngIf="ficha">
    <div class="meta-block">
      <span class="meta-label">iPel:</span>
      <div class="ipel-dots" [class.empty]="!ficha.ipel">
        <span
  *ngFor="let n of ipelDots"
  class="dot"
  [class.active]="(ficha?.ipel ?? 0) === n"
  [class]="getIpelClass(n)"
  [attr.aria-label]="'Nivel iPel ' + n"
  role="img"
>
  <span *ngIf="(ficha?.ipel ?? 0) === n">{{ n }}</span>
</span>

        <span class="ipel-empty" *ngIf="!ficha.ipel">Sin dato</span>
      </div>
    </div>

    <div class="meta-block">
      <span class="meta-label">Raz칩n de Peligro:</span>
      <span class="meta-value">{{ ficha.hazardReason }}</span>
    </div>
  </div>
  <div class="ficha-table">
    <!-- Nombre del producto -->
    <div class="row">
      <div class="cell label">Nombre del producto:</div>
      <div class="cell value">{{ ficha.productName }}</div>
    </div>

    <!-- Proveedor -->
    <div class="row alt">
      <div class="cell label">Proveedor:</div>
      <div class="cell value">{{ ficha.supplier }}</div>
    </div>

    <!-- Visualizaci칩n + Fuente de datos + imprimir -->
    <div class="row">
      <div class="cell label">Visualizaci칩n de insumo:</div>
      <div class="cell value">
        <div class="split">
          <div class="left"><b>{{ ficha.displayVisibility }}</b></div>
          <div class="right">
            <span class="source">
              Fuente de Datos: {{ ficha.dataSource }}
            </span>
            <button
              class="icon-btn"
              type="button"
              (click)="onPrint()"
              title="Exportar a PDF"
            >
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M6 9V3h12v6h1a3 3 0 0 1 3 3v6h-4v3H6v-3H2v-6a3 3 0 0 1 3-3h1Zm2-4v4h8V5H8Zm8 12H8v3h8v-3Z"
                />
                <circle cx="18" cy="12" r="1.5" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Pictogramas -->
    <div class="row alt">
      <div class="cell label">Pictograma :</div>
      <div class="cell value">
        <ng-container *ngIf="ficha?.pictograms?.length; else sinPictos">
          <div class="pictos ghs-list">
            <img
              *ngFor="let code of ficha.pictograms; trackBy: trackByCode"
              class="ghs-icon"
              [src]="getPictogramUrl(code)"
              [alt]="code"
              [title]="code"
              loading="lazy"
            />
          </div>
        </ng-container>
        <ng-template #sinPictos>
          <span class="muted">Sin pictogramas</span>
        </ng-template>
      </div>
    </div>

    <!-- Palabra de advertencia -->
    <div class="row">
      <div class="cell label">Palabra de advertencia:</div>
      <div class="cell value">
        <b>{{ ficha.signalWord }}</b>
      </div>
    </div>

    <!-- Indicaciones de peligro (lista H) -->
    <div class="row alt">
      <div class="cell label">Indicaciones de peligro</div>
      <div class="cell value">
        <ul class="list">
          <li
            *ngFor="let h of ficha.hazardStatements; let i = index"
            [class.strip]="i % 2 === 1"
          >
            {{ h }}
          </li>
        </ul>
      </div>
    </div>

    <!-- Consejos de prudencia (lista P) -->
    <div class="row">
      <div class="cell label">Consejos de Prudencia</div>
      <div class="cell value">
        <ul class="list">
          <li
            *ngFor="let p of ficha.precautionaryStatements; let i = index"
            [class.strip]="i % 2 === 1"
          >
            {{ p }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
