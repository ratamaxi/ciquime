<div class="container pt-5">
  <div class="row">
    <div class="col">
      <h5 class="label">Nombre Interno:</h5>

      <!-- Tabs -->
      <div class="tabs">
        <button *ngFor="let t of tabs" class="tab-btn" [class.active]="active === t.key" (click)="setActive(t.key)">
          {{ t.label }}
        </button>
      </div>

      <!-- Estados de carga / error -->
  <div *ngIf="loadingTab" class="mt-2">
        <app-spinner [text]="'Cargando ' + activeLabel + '…'"></app-spinner>
      </div>      <div *ngIf="!loadingTab && errorTab" class="mt-2 text-danger">{{ errorTab }}</div>

      <!-- Contenido por pestaña -->
      <ng-container [ngSwitch]="active">

        <!-- Peligros por SGA -->
        <ng-container *ngSwitchCase="'peligro'">
          <app-tabla-peligro *ngIf="fichaPeligro as fp" [ficha]="fp">
          </app-tabla-peligro>
        </ng-container>

        <!-- EPP y Composición -->
        <app-tabla-epp *ngSwitchCase="'epp'" [ficha]="fichaEpp!"/>
        <!-- NFPA y Transporte -->
<app-tabla-nfpa *ngSwitchCase="'nfpa'" [ficha]="nfpaData!" [materiaId]="materiaId" />
        <!-- Tratamiento -->
        <app-tabla-tratamiento *ngSwitchCase="'trat'" [ficha]="tratamientoData!"/>

        <!-- Emergencia -->
        <app-tabla-emergencia *ngSwitchCase="'emerg'" [ficha]="emergenciaData!"/>

        <!-- Almacenamiento -->
        <app-tabla-almacenamiento *ngSwitchCase="'alm'" [ficha]="almacenamientoData!"/>

        <!-- Fallback -->
        <div class="card note" *ngSwitchDefault>
          <p>Contenido pendiente para esta pestaña.</p>
        </div>
      </ng-container>
    </div>
  </div>
</div>
