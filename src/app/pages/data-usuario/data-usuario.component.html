<div class="container">

  <div class="row">
    <div class="col tabla-scroll">

      <div class="row py-4">
        <div class="col-6">
          <h4>Búsqueda de usuarios</h4>
          <span>Sección para editar y administrar usuarios</span>
        </div>
        <div class="col-6">
          <div class="form">
            <i class="fa fa-search"></i>
            <input type="text" [(ngModel)]="busqueda" (ngModelChange)="filtrarUsuarios()"
              class="form-control form-input" placeholder="Ingrese el usuario que desea buscar" />
          </div>
        </div>
      </div>

  <div *ngIf="loading" class="mt-2">
      <app-spinner text="Buscando insumos…"></app-spinner>
    </div>      <div *ngIf="!loading && error" class="mt-2 text-danger">{{ error }}</div>

      <table class="table table-striped" *ngIf="!loading && !error">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Acción</th>
          </tr>
        </thead>

        <tbody>
          <tr class="pointer usuario-selector fadeIn" *ngFor="let data of usuariosPaginados">
            <td data-bs-toggle="modal" data-bs-target="#agregarEjercicio">
              {{ data.user }}
            </td>
            <td data-bs-toggle="modal" data-bs-target="#agregarEjercicio">
              {{ data.email }}
            </td>
            <td>
                 <a
                [routerLink]="['/panel/data-user/editar']"
                [state]="{ usuarioId: data.id }"
                app-tooltip
                class="fa fa-edit pr-3"
                title="Editar usuario"
                (click)="$event.stopPropagation()"
                aria-label="Editar usuario"></a>
            </td>
          </tr>

          <tr *ngIf="usuariosPaginados.length === 0">
            <td colspan="3" class="text-center">No hay resultados</td>
          </tr>
        </tbody>
      </table>

      <!-- Paginador dinámico -->
      <div class="row" *ngIf="!loading && !error && totalPages > 1">
        <div class="col">
          <nav aria-label="Page navigation example">
            <ul class="pagination d-flex justify-content-end">
              <li class="page-item" [class.disabled]="page === 1">
                <a class="page-link" (click)="prevPage()">Previous</a>
              </li>

              <li class="page-item" *ngFor="let p of pages" [class.active]="p === page">
                <a class="page-link" (click)="goToPage(p)">{{ p }}</a>
              </li>

              <li class="page-item" [class.disabled]="page === totalPages">
                <a class="page-link" (click)="nextPage()">Next</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>
